# MCCarnival-PPT 插件使用说明

## 功能描述
这个插件可以修改ItemDisplay实体中幻翼膜物品的CustomModelData值，支持命令操作和物品交互两种方式。

## 命令使用

### /ppt next
- 功能：将附近幻翼膜ItemDisplay实体的CustomModelData值+1
- 权限：仅OP可用
- 搜索范围：根据配置文件设置（默认10格）

### /ppt up
- 功能：将附近幻翼膜ItemDisplay实体的CustomModelData值-1
- 权限：仅OP可用
- 搜索范围：根据配置文件设置（默认10格）

### /ppt pagepen [玩家名]
- 功能：给玩家发放PPT翻页笔物品
- 权限：仅OP可用
- 说明：获得一个CustomModelData为1的木棍，可用于交互式翻页
- 参数：
  - 不指定玩家名：给自己发放翻页笔
  - 指定玩家名：给指定玩家发放翻页笔
  - 支持Tab补全在线玩家名

### /ppt page <数字>
- 功能：直接跳转到指定页数
- 权限：仅OP可用
- 说明：将附近的幻翼膜ItemDisplay实体的CustomModelData直接设置为指定数字
- 参数：页数必须大于等于1
- 搜索范围：根据配置文件设置（默认10格）

### /ppt forbid
- 功能：切换翻页笔功能的启用/禁用状态
- 权限：仅OP可用
- 说明：禁用后翻页笔将无法使用，但命令翻页仍然可用，再次执行可重新启用

## 高级设置命令

### /post set <数字>
- 功能：强制设置页数（无最大值限制）
- 权限：仅OP可用
- 说明：可以设置超过配置文件中最大值的页数，用于特殊情况
- 参数：页数必须大于等于1
- 搜索范围：根据配置文件设置

## PPT翻页笔使用

### 物品属性
- 材质：木棍(STICK)
- CustomModelData：1
- 显示名称：§6PPT翻页笔

### 使用权限
- 权限：mccarnival.ppt.penuse
- 说明：只有拥有此权限的玩家才能使用翻页笔进行翻页操作

### 交互方式
- **左键点击**：下一页（CustomModelData +1）
- **右键点击**：上一页（CustomModelData -1）
- 支持空气点击和方块点击
- 自动取消其他交互事件

## 使用步骤

### 命令使用
1. 确保你是服务器OP
2. 站在ItemDisplay实体附近（根据配置文件设置的范围）
3. 确保ItemDisplay实体显示的是幻翼膜物品
4. 使用命令：
   - `/ppt next` - 增加CustomModelData
   - `/ppt up` - 减少CustomModelData

### 翻页笔使用
1. 确保你有权限 `mccarnival.ppt.penuse`
2. 从OP处获取PPT翻页笔（使用 `/ppt pagepen` 命令）
3. 站在ItemDisplay实体附近
4. 左键点击翻到下一页，右键点击翻到上一页

## 配置文件

插件会在首次启动时生成 `config.yml` 配置文件，包含以下设置：

```yaml
# PPT页数设置
ppt:
  # PPT的最大页数，超过此数值只能通过 /post set 命令修改
  max-page: 100
  
# 其他设置
settings:
  # 搜索范围（格数）
  search-range: 10
```

### 配置说明
- `ppt.max-page`: 设置PPT的最大页数，默认为100
- `settings.search-range`: 设置搜索ItemDisplay实体的范围，默认为10格

## 重要限制

### CustomModelData数值限制
- **最小值限制**：所有翻页操作都不能将CustomModelData设置为0或负数，最小值为1
- **最大值限制**：普通翻页操作（`/ppt next`、`/ppt up`、`/ppt page`、翻页笔）不能超过配置文件中设置的最大值
- **超过最大值时**：只能使用 `/post set` 命令进行设置
- 尝试超过限制时会显示相应的错误提示

### 翻页笔禁用功能
- 使用`/ppt forbid`可以全局禁用/启用翻页笔功能
- 禁用时翻页笔无法使用，但命令翻页仍然可用
- 状态会在插件重启后重置为启用

## 权限设置

### 命令权限
- 所有命令（`/ppt` 和 `/post`）：仅服务器OP可用
- 无需额外权限配置，只要是OP即可使用所有命令功能

### 翻页笔权限
- `mccarnival.ppt.penuse`: 使用PPT翻页笔的权限
- 默认值：false（需要手动给予权限）
- 说明：只有拥有此权限的玩家才能使用翻页笔进行翻页操作

## 注意事项

- 只有玩家可以使用这些命令
- 只会修改幻翼膜(PHANTOM_MEMBRANE)类型的ItemDisplay实体
- 搜索范围可在配置文件中调整，默认为周围10x10x10的区域
- 如果找不到符合条件的实体，会显示提示信息
- 配置文件修改后需要重启服务器或重载插件才能生效

## 安装方法

1. 将编译好的jar文件放入服务器的plugins文件夹
2. 重启服务器或使用插件管理器重载
3. 权限配置：
   - 命令使用：确保需要使用命令的玩家拥有OP权限
   - 翻页笔使用：给需要使用翻页笔的玩家分配权限 `mccarnival.ppt.penuse`